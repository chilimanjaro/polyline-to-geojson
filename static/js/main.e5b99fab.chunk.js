(this["webpackJsonppolyline-to-geojson"]=this["webpackJsonppolyline-to-geojson"]||[]).push([[0],{10:function(e,t,a){e.exports=a.p+"static/media/loading-animation.80a2dbc6.svg"},11:function(e,t,a){e.exports=a(18)},16:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(8),o=a.n(r),l=(a(16),a(9)),s=a(1),c=a(2),u=a(4),m=a(3),d=a(6),p=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){return e.props.removeError(e.props.index)}),5e3)}},{key:"componentWillUnmount",value:function(){clearTimeout()}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"error"},this.props.message," ",i.a.createElement("div",{className:"close",onClick:function(){return e.props.removeError(e.props.index)}}))}}]),a}(n.Component),h=a(20),g=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement("div",Object.assign({id:"drop-area"},this.props.dragProps,{className:this.props.inDragArea?"active":""}),i.a.createElement("input",{id:"file-chooser-input",type:"file",accept:".csv",onChange:function(t){return e.props.handleFile(t.target.files[0])}}),i.a.createElement("label",{className:"drag-area-button",htmlFor:"file-chooser-input"},"Drag your file here or click here to choose it from the list."),i.a.createElement("div",{id:"drag-area-overlay",className:this.props.inDragArea?"active":""},i.a.createElement("div",{className:"drag-area-overlay-text"},"Drop your file here.")))}}]),a}(n.Component),f=a(5),v=a.n(f),E=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleDragEnter=function(e){e.preventDefault(),e.stopPropagation(),n.dragDepth++,e.dataTransfer.items&&e.dataTransfer.items.length>0&&n.setState({inDragArea:!0})},n.handleDragLeave=function(e){e.preventDefault(),e.stopPropagation(),n.dragDepth--,n.dragDepth>0||n.setState({inDragArea:!1})},n.handleDragOver=function(e){e.preventDefault(),e.stopPropagation()},n.handleDrop=function(e){e.preventDefault(),e.stopPropagation(),n.setState({inDragArea:!1}),e.dataTransfer.items&&e.dataTransfer.items.length>0&&(e.dataTransfer.items.length>1?n.showError("Dragged too many files."):n.handleFile(e.dataTransfer.files[0]),e.dataTransfer.clearData(),n.dragDepth=0)},n.handleFile=function(e){if(null!==e&&void 0!==e){if("text/csv"!==e.type)return n.showError("Uploaded file is not a CSV file.");n.props.handleIsFileLoading(!0);var t=new FileReader,a=v()();t.onload=function(e){a.parseFileData(e.target.result).then((function(e){n.props.handleFileUpload(e)})).catch((function(e){n.showError(e.message),n.props.handleIsFileLoading(!1)}))},t.readAsText(e)}},n.showError=function(e){var t=n.state.errors;n.setState({errors:[].concat(Object(d.a)(t),[{id:Object(h.a)(),message:e}])})},n.removeError=function(e){var t=n.state.errors.filter((function(t){return t.id!==e}));n.setState({errors:Object(d.a)(t)})},n.state={inDragArea:!1,errors:[]},n.dragDepth=0,n.dragProps={onDragEnter:n.handleDragEnter,onDragLeave:n.handleDragLeave,onDragOver:n.handleDragOver,onDrop:n.handleDrop},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{id:"file-loader"},i.a.createElement(g,{dragProps:this.dragProps,inDragArea:this.state.inDragArea,handleFile:this.handleFile}),i.a.createElement("div",{className:"error-group"},this.state.errors.map((function(t){return i.a.createElement(p,{key:t.id,message:t.message,index:t.id,removeError:e.removeError})}))))}}]),a}(i.a.Component),b=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return i.a.createElement("h2",null,"Data Editor")}}]),a}(n.Component),O=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"section"},i.a.createElement("h2",{className:"success"},"File uploaded successfully!"),i.a.createElement("div",{className:"section-content"},"Found ",i.a.createElement("span",{style:{fontWeight:"bold"}},this.props.dataLength)," rows and ",i.a.createElement("span",{style:{fontWeight:"bold"}},this.props.columnsLength)," columns in uploaded file. Columns for Polyline, start timestamp and end timestamp should be assigned automatically if they were found. You can modify it below if it was done incorrectly."))}}]),a}(n.Component),C=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"section"},i.a.createElement("h2",null,"Want to upload another file?"),i.a.createElement("div",{className:"section-content"},"Click button below to upload a new file. This will remove previously uploaded data.",i.a.createElement("button",{onClick:function(){return e.props.reinitialize()}},"Reupload file")))}}]),a}(n.Component),y=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,this.props.show&&i.a.createElement("div",{className:"section-option"},i.a.createElement("label",{htmlFor:this.props.id},this.props.title),i.a.createElement("div",{className:"select-wrapper"},i.a.createElement("select",{id:this.props.id,name:this.props.id,value:this.props.value,onChange:this.props.onChange},i.a.createElement("option",{value:null}),this.props.columns.map((function(e,t){return i.a.createElement("option",{key:t,value:t},e)}))))))}}]),a}(n.Component),j=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).handleChangeSectionOption=function(t){var a=parseInt(t.target.value);isNaN(a)&&(a=null),e.props.handleChangeOptionValue(t.target.name,a)},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"section"},i.a.createElement("h2",null,"Choose columns"),i.a.createElement("div",{className:"section-content"},i.a.createElement(y,{id:"polylineColumnId",title:"Polyline",value:this.props.polylineColumnId,onChange:this.handleChangeSectionOption,columns:this.props.columns,show:!0}),i.a.createElement("div",{className:"section-option"},i.a.createElement("label",{htmlFor:"includePathAnimation"},"Include Path Animation?"),i.a.createElement("input",{type:"checkbox",id:"includePathAnimation",name:"includePathAnimation",checked:this.props.includePathAnimation,onChange:function(t){return e.props.handleChangeOptionValue(t.target.name,t.target.checked)}}),i.a.createElement("div",{className:"section-description"},"Checking this checkbox will set if start and end date should be included in GeoJSON coordinates. Thank to this, animating path through time will be possible.")),i.a.createElement(y,{id:"startTimestampColumnId",title:"Start Timestamp",value:this.props.startTimestampColumnId,onChange:this.handleChangeSectionOption,columns:this.props.columns,show:this.props.includePathAnimation}),i.a.createElement(y,{id:"endTimestampColumnId",title:"End Timestamp",value:this.props.endTimestampColumnId,onChange:this.handleChangeSectionOption,columns:this.props.columns,show:this.props.includePathAnimation})))}}]),a}(n.Component),N=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"section"},i.a.createElement("h2",null,"Export File"),i.a.createElement("div",{className:"section"},i.a.createElement("div",{className:"section-content"},"Set filename and click generate to download GeoJSON file.",i.a.createElement("div",{className:"section-option"},i.a.createElement("label",{htmlFor:"fileName"},"Filename"),i.a.createElement("input",{id:"fileName",name:"fileName",type:"text",value:this.props.fileName,onChange:function(t){return e.props.handleFileNameChange(t.target.value)}}),i.a.createElement("button",{className:"inline",onClick:this.props.generateGeoJSON},"Generate GeoJSON")))))}}]),a}(n.Component),F=a(10),D=a.n(F);var I=function(e){return i.a.createElement("div",{className:"loading"},i.a.createElement("img",{src:D.a,alt:"Loading animation"}),"Please wait")},w={columns:[],data:[],polylineColumnId:null,startTimestampColumnId:null,endTimestampColumnId:null,includePathAnimation:!1,isFileLoading:!1,isFileUploaded:!1,isGenerating:!1,fileName:"decoded-data"},k=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state=w,e.handleFileUpload=function(t){var a=t.columns,n=void 0===a?[]:a,i=t.data,r=void 0===i?[]:i,o=t.polylineColumnId,l=void 0===o?null:o,s=t.startTimestampColumnId,c=void 0===s?null:s,u=t.endTimestampColumnId,m=void 0===u?null:u;e.setState({columns:n,data:r,polylineColumnId:l,startTimestampColumnId:c,endTimestampColumnId:m,isFileUploaded:!0,isFileLoading:!1})},e.handleChangeOptionValue=function(t,a){return e.setState(Object(l.a)({},t,a))},e.handleIsFileLoading=function(t){return e.setState({isFileLoading:t})},e.handleIsGenerating=function(t){return e.setState({isGenerating:t})},e.handleFileNameChange=function(t){return e.setState({fileName:t})},e.generateGeoJSON=function(t){t.preventDefault(),e.handleIsGenerating(!0),v()().generateFeatureCollection(e.state.data,e.state.columns,e.state.polylineColumnId,e.state.startTimestampColumnId,e.state.endTimestampColumnId,e.state.includePathAnimation).then((function(t){e.saveData(t),e.handleIsGenerating(!1)})).catch((function(t){console.log(t.message),e.handleIsGenerating(!1)}))},e.saveData=function(t){var a=JSON.stringify(t),n=new Blob([a],{type:"application/json"}),i=URL.createObjectURL(n),r=document.createElement("a");document.body.appendChild(r),r.style="display: none",r.href=i,e.state.fileName?(r.download="".concat(e.state.fileName,".geojson"),r.click(),window.URL.revokeObjectURL(i),r.remove()):console.log("File name is empty")},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"app-description"},i.a.createElement("h1",null,"Polyline to GeoJSON Decoder"),i.a.createElement("p",null,"Upload CSV file that contains Polyline values, which will be used to convert to GeoJSON coordinates. Optionally, your file can contain start timestamp and end timestamp for animating paths. Every available column will be converted into Feature properties.")),i.a.createElement("div",{className:"content"},!this.state.isFileLoading&&!this.state.isFileUploaded&&!this.state.isGenerating&&i.a.createElement(E,{handleFileUpload:this.handleFileUpload,handleIsFileLoading:this.handleIsFileLoading}),!this.state.isFileLoading&&this.state.isFileUploaded&&!this.state.isGenerating&&i.a.createElement(i.a.Fragment,null,i.a.createElement(O,{columnsLength:this.state.columns.length,dataLength:this.state.data.length}),i.a.createElement(j,{columns:this.state.columns,polylineColumnId:this.state.polylineColumnId,startTimestampColumnId:this.state.startTimestampColumnId,endTimestampColumnId:this.state.endTimestampColumnId,includePathAnimation:this.state.includePathAnimation,handleChangeOptionValue:this.handleChangeOptionValue}),i.a.createElement(N,{generateGeoJSON:this.generateGeoJSON,fileName:this.state.fileName,handleFileNameChange:this.handleFileNameChange}),i.a.createElement(b,null),i.a.createElement(C,{reinitialize:function(){return e.setState(w)}})),(this.state.isGenerating||this.state.isFileLoading)&&i.a.createElement(I,null)))}}]),a}(i.a.Component);o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(k,null)),document.getElementById("root"))},5:function(e,t,a){var n=a(17),i=["parseFileData","generateFeatureCollection"];e.exports=function(){var e=new Worker(a.p+"99b0d88542a99209d812.worker.js",{name:"[hash].worker.js"});return n(e,i),e}}},[[11,1,2]]]);
//# sourceMappingURL=main.e5b99fab.chunk.js.map